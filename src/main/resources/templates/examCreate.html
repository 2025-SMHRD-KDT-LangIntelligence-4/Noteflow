<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>ì‹œí—˜ ìƒì„±</title>
    <link rel="stylesheet" th:href="@{/css/header.css}">
    <link rel="stylesheet" id="theme-css" th:href="@{/css/examCreate.css}">
    <script>
		document.addEventListener("DOMContentLoaded", () => {
		  const themeLink = document.getElementById("theme-css");
		  const themeToggleBtn = document.getElementById("theme-toggle-btn");
		
		  // ì €ì¥ëœ ëª¨ë“œ ë¶ˆëŸ¬ì˜¤ê¸°
		  const savedTheme = localStorage.getItem("theme") || "light";
		
		  // ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸ (ë²„íŠ¼ì´ ì—†ìœ¼ë©´ ë¡œê·¸ì•„ì›ƒ ìƒíƒœë¡œ íŒë‹¨)
		  const isLoggedIn = !!themeToggleBtn;
		
		  if (isLoggedIn) {
		    // ë¡œê·¸ì¸ ìƒíƒœì—ì„œëŠ” ì €ì¥ëœ í…Œë§ˆ ì ìš©
		    applyTheme(savedTheme);
		
		    // ë²„íŠ¼ í´ë¦­ ì‹œ ë‹¤í¬ëª¨ë“œ ì „í™˜
		    themeToggleBtn.addEventListener("click", () => {
		      const current = localStorage.getItem("theme") || "light";
		      const next = current === "light" ? "dark" : "light";
		      applyTheme(next);
		    });
		  } else {
		    // ë¡œê·¸ì•„ì›ƒ ìƒíƒœì—ì„œëŠ” í•­ìƒ ë¼ì´íŠ¸ëª¨ë“œ ì ìš©
		    applyTheme("light");
		  }
		
		  // âœ… í…Œë§ˆ ì ìš© í•¨ìˆ˜
		  function applyTheme(mode) {
		    if (mode === "dark") {
		      themeLink.setAttribute("href", "/CSSDARK/examCreate.css");
		      localStorage.setItem("theme", "dark");
		      if (themeToggleBtn) {
		        themeToggleBtn.classList.add("dark"); // ë²„íŠ¼ ì´ë™ í´ë˜ìŠ¤ ì¶”ê°€
		      }
		    } else {
		      themeLink.setAttribute("href", "/css/examCreate.css");
		      localStorage.setItem("theme", "light");
		      if (themeToggleBtn) {
		        themeToggleBtn.classList.remove("dark"); // ê¸°ë³¸ ìœ„ì¹˜ë¡œ ë³µê·€
		      }
		    }
		  }
		});
	</script>
    <link rel="stylesheet" th:href="@{/css/footer.css}">
    <meta name="csrf" th:content="${_csrf?.token}">
    <meta name="csrf-header" th:content="${_csrf?.headerName}">
</head>
<body>
<div th:replace="~{fragments/header :: siteHeader}"></div>

<div class="page-wrapper">
    <!-- ë­í‚¹ ì˜ì—­ -->
    <div class="ranking-container">
        <h2>ğŸ† ì´ë²ˆ ì£¼ ì‹œí—˜ ë­í‚¹</h2>
        <div class="ranking-box1">
            <div class="profile-img"><img th:src="@{/images/default-profile.png}" alt="1ë“±"></div>
            <div class="nickname"><span>ğŸ¥‡ 1ë“± ë‹‰ë„¤ì„</span></div>
        </div>
        <div class="ranking-box">
            <div class="profile-img"><img th:src="@{/images/default-profile.png}" alt="2ë“±"></div>
            <div class="nickname"><span>ğŸ¥ˆ 2ë“± ë‹‰ë„¤ì„</span></div>
        </div>
        <div class="ranking-box">
            <div class="profile-img"><img th:src="@{/images/default-profile.png}" alt="3ë“±"></div>
            <div class="nickname"><span>ğŸ¥‰ 3ë“± ë‹‰ë„¤ì„</span></div>
        </div>
        <div class="ranking-box">
            <div class="profile-img"><img th:src="@{/images/default-profile.png}" alt="4ë“±"></div>
            <div class="nickname"><span>4ë“± ë‹‰ë„¤ì„</span></div>
        </div>
        <div class="ranking-box">
            <div class="profile-img"><img th:src="@{/images/default-profile.png}" alt="5ë“±"></div>
            <div class="nickname"><span>5ë“± ë‹‰ë„¤ì„</span></div>
        </div>
    </div>

    <div class="location-container">
        <!-- ì¢Œì¸¡: ë…¸íŠ¸ ëª©ë¡ -->
        <div class="notion-list-container">
            <div class="search-container">
                <input type="text" id="searchInput" placeholder="ë…¸íŠ¸ ê²€ìƒ‰...">
                <button id="clearSearchBtn" class="clear-search-btn">âœ•</button>
            </div>

            <div id="itemList" class="notion-list tree-container">
                <!-- JavaScriptë¡œ ë™ì  ë Œë”ë§ë¨ -->
            </div>
        </div>

        <!-- ìš°ì¸¡: ì„¤ì • ì˜ì—­ -->
        <div class="notion-content-container">
            <h2 class="section-title">âš™ï¸ ì‹œí—˜ ì„¤ì •</h2>

            <!-- ì„ íƒëœ í‚¤ì›Œë“œ -->
            <div class="keyword-section">
                <h3 class="subsection-title">ì„ íƒëœ í‚¤ì›Œë“œ</h3>
                <div class="keyword-hint" style="margin-bottom: 10px; font-size: 12px; color: #666;">
                    ğŸ’¡ <strong>Tip:</strong> ë…¸íŠ¸ë¥¼ í´ë¦­í•˜ë©´ í‚¤ì›Œë“œ êµì²´, <kbd>Ctrl</kbd>+í´ë¦­í•˜ë©´ ì¶”ê°€ë©ë‹ˆë‹¤
                </div>
                <div class="keyword-input-group">
                    <input type="text" id="keywordInput" placeholder="í‚¤ì›Œë“œ ì…ë ¥ í›„ Enter">
                    <button id="addKeywordBtn" class="add-keyword-btn">
  						<img th:src="@{/images/plus.svg}" alt="ì¶”ê°€" class="icon">
					</button>
                    <button id="clearAllKeywordsBtn" class="clear-all-keywords-btn">ì „ì²´ì‚­ì œ</button>
                </div>
                <div id="selectedTagsContainer" class="tag-display">
                    <p class="empty-text">ë…¸íŠ¸ ì„ íƒ ë˜ëŠ” ì§ì ‘ í‚¤ì›Œë“œ ì…ë ¥</p>
                </div>
            </div>

            <!-- ì‹œí—˜ ì„¤ì • í¼ -->
            <div class="config-form">
                <div class="config-row">
                    <label>ì‹œí—˜ ì œëª©</label>
                    <input type="text" id="examTitle" placeholder="ìë™ ìƒì„±ë©ë‹ˆë‹¤ (ìˆ˜ì • ê°€ëŠ¥)">
                </div>

                <div class="config-row">
                    <label>ë¬¸ì œ ê°œìˆ˜</label>
                    <div class="radio-group">
                        <label class="radio-label">
                            <input type="radio" name="questionMode" value="auto" checked>
                            ìë™ (í‚¤ì›Œë“œë‹¹ 10ê°œ)
                        </label>
                        <label class="radio-label">
                            <input type="radio" name="questionMode" value="manual">
                            ì§ì ‘ ì§€ì •
                        </label>
                    </div>
                    <input type="number" id="questionCount" min="5" max="100" value="20" disabled>
                    <small id="questionHint">í‚¤ì›Œë“œ ì„ íƒ ì‹œ ìë™ìœ¼ë¡œ ê³„ì‚°ë©ë‹ˆë‹¤</small>
                </div>

                <div class="config-row">
                    <label>ë‚œì´ë„</label>
                    <select id="difficulty">
                        <option value="">ìë™ ì¡°ì ˆ (ì¶”ì²œ)</option>
                        <option value="1">Level 1 (ì‰¬ì›€)</option>
                        <option value="2">Level 2</option>
                        <option value="3">Level 3</option>
                        <option value="4">Level 4</option>
                        <option value="5">Level 5 (ì–´ë ¤ì›€)</option>
                    </select>
                    <small>ìë™ ì¡°ì ˆ ì„ íƒ ì‹œ ì´ì „ ê²°ê³¼ì— ë”°ë¼ ë‚œì´ë„ê°€ ì¡°ì •ë©ë‹ˆë‹¤</small>
                </div>

                <div class="config-row">
                    <label>ë¬¸ì œë‹¹ ë°°ì </label>
                    <input type="number" id="scorePerQuestion" min="1" max="10" value="1">
                </div>

                <button id="createExamBtn" class="btn-primary" disabled>
                    ì‹œí—˜ ìƒì„±í•˜ê¸°
                </button>
            </div>
        </div>
    </div>
</div>

<div th:replace="~{fragments/footer :: siteFooter}"></div>

<!-- ë°ì´í„° ì „ë‹¬ -->
<script th:inline="javascript">
    const FOLDER_TREE = [[${folderTreeJson}]];
    const ROOT_NOTES = [[${rootNotesJson}]];
    const PRESELECTED_NOTE_IDX = [[${preselectedNoteIdx}]];
    const PRESELECTED_NOTE_TITLE = [[${preselectedNoteTitle}]];
    const PRESELECTED_KEYWORDS = [[${preselectedKeywords}]];
</script>

<script th:src="@{/js/examCreate.js}"></script>
</body>
</html>
