<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="_csrf" th:content="${_csrf.token}" />
<meta name="_csrf_header" th:content="${_csrf.headerName}" />

<title>스케줄 관리 달력</title>
<link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.css" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/index.global.min.js"></script>
<!-- flatpickr 라이브러리 -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script src="https://cdn.jsdelivr.net/npm/flatpickr/dist/l10n/ko.js"></script>

<link rel="stylesheet" th:href="@{/css/schedule-manager.css}" />
<link rel="stylesheet" th:href="@{/css/header.css}" />
<link rel="stylesheet" th:href="@{/css/footer.css}" />
<style>
/* FullCalendar 기본 스타일 조정 */
#calendar { max-width: 900px; margin: 0 auto; }
.selected-date { background-color: #d3eaff !important; }
.fc-event-title { white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 120px; }
.range-picker-container { margin-top: 10px; }
</style>

</head>
<body>
<div th:replace="fragments/header :: siteHeader"></div>

<div class="location-container">
    <!-- 좌측: 일정 관리 패널 -->
    <div class="schedule-manager-container">
        <div class="date">날짜를 선택하세요</div>
        <input type="text" class="schedule-search" placeholder="검색어 입력 후 Enter" />
        <div class="schedule">작성된 스케줄이 여기에 표시됩니다</div>

        <!-- 색상 필터 -->
        <div class="schedule-color-filter">
            <span>카테고리 필터:</span>
            <div class="filter-options">
                <div class="filter-option" data-color="all" style="background-color: #000; color: #fff;">전체</div>
                <div class="filter-option" data-color="#3788d8" style="background-color: #3788d8;"></div>
                <div class="filter-option" data-color="#FF5722" style="background-color: #FF5722;"></div>
                <div class="filter-option" data-color="#4CAF50" style="background-color: #4CAF50;"></div>
                <div class="filter-option" data-color="#FFC107" style="background-color: #FFC107;"></div>
                <div class="filter-option" data-color="#9C27B0" style="background-color: #9C27B0;"></div>
            </div>
        </div>

        <!-- 색상 선택 -->
        <div class="schedule-color-picker">
            <span>카테고리 색상:</span>
            <div class="color-options">
                <div class="color-option" data-color="#3788d8" style="background-color: #3788d8;"></div>
                <div class="color-option" data-color="#FF5722" style="background-color: #FF5722;"></div>
                <div class="color-option" data-color="#4CAF50" style="background-color: #4CAF50;"></div>
                <div class="color-option" data-color="#FFC107" style="background-color: #FFC107;"></div>
                <div class="color-option" data-color="#9C27B0" style="background-color: #9C27B0;"></div>
            </div>
        </div>

        <!-- 단일 일정 입력 -->
        <input type="text" class="schedule-create" placeholder="스케줄을 입력하세요" />

        <!-- 기간 선택 모드 -->
        <div class="range-picker-container">
            <label class="toggle-container">
                <input type="checkbox" id="rangeModeToggle" />
                <span>🗓️ 기간 선택 모드</span>
            </label>
            <div id="rangeInputs" style="display:none; margin-top:5px;">
                <input type="text" id="rangePicker" placeholder="기간 선택" />
            </div>
        </div>
    </div>

    <!-- 우측: 달력 -->
    <div class="calendar-container">
        <div id="calendar"></div>
    </div>
</div>

<!-- ======================================== -->
<!-- JS: 스크립트 영역 -->
<!-- DOMContentLoaded로 감싸면 HTML 렌더링 후 실행 -->
<script th:src="@{/js/schedule-manager.js}"></script>
<script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.15/locales/ko.global.min.js"></script>
<div th:replace="fragments/footer :: siteFooter"></div>
</body>
</html>
