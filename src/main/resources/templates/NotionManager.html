<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}" />
    <meta name="_csrf_header" th:content="${_csrf.headerName}" />
    <title>λ…Έμ… | νμΌ κ΄€λ¦¬</title>
    <link rel="stylesheet" th:href="@{/css/header.css}" />
    <link rel="stylesheet" th:href="@{/css/notionmanager.css}" />
    <link rel="stylesheet" th:href="@{/css/footer.css}" />
    
    <!-- HandsOnTable for Excel/CSV editing -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.full.min.css">
    <script src="https://cdn.jsdelivr.net/npm/handsontable/dist/handsontable.full.min.js"></script>
</head>
<body>
<div th:replace="~{fragments/header :: siteHeader}"></div>

<div class="page-wrapper">
    <div class="location-container">
        <!-- μ™Όμ½: λ…ΈνΈ/νμΌ λ¦¬μ¤νΈ -->
        <div class="notion-list-container">
            <!-- νƒ­ -->
            <div class="tab-container">
                <button class="tab-button active" data-tab="notes">π“ μ •λ¦¬λ³Έ</button>
                <button class="tab-button" data-tab="files">π“ μ›λ³ΈνμΌ</button>
            </div>

            <!-- κ²€μƒ‰λ°” -->
            <input type="text" class="search-bar" id="searchInput" placeholder="νμΌμ΄λ‚ λ…ΈνΈλ¥Ό κ²€μƒ‰ν•μ„Έμ”...">

            <!-- κ΄€λ¦¬ λ²„νΌλ“¤ -->
            <div class="management-buttons">
                <button id="createFolderBtn" title="μƒ ν΄λ”">π“ ν΄λ”</button>
                <button id="uploadBtn" title="νμΌ μ—…λ΅λ“">π“¤ μ—…λ΅λ“</button>
            </div>

            <!-- λ…ΈνΈ/νμΌ λ¦¬μ¤νΈ (νΈλ¦¬ κµ¬μ΅°) -->
            <div class="notion-list" id="itemList">
                <div class="welcome-message">
                    <p>λ΅λ”© μ¤‘...</p>
                </div>
            </div>
        </div>

        <!-- μ¤λ¥Έμ½: μ»¨ν…μΈ  λ―Έλ¦¬λ³΄κΈ° -->
        <div class="notion-content-container">
            <!-- μ λ© -->
            <div class="notion-title readonly" id="itemTitle" contenteditable="false">
                νμΌμ΄λ‚ λ…ΈνΈλ¥Ό μ„ νƒν•΄μ£Όμ„Έμ”
            </div>

            <!-- λ²„νΌ μ»¨ν…μ΄λ„ -->
            <div class="button-container" id="buttonContainer">
                <!-- λ²„νΌλ“¤μ΄ λ™μ μΌλ΅ μ—¬κΈ° μ¶”κ°€λ¨ -->
            </div>

            <!-- μ»¨ν…μΈ  μμ—­ -->
            <div class="content-area">
                <!-- ν…μ¤νΈ μ—λ””ν„° -->
                <textarea class="notion-content readonly" id="itemContent" readonly 
                          placeholder="μ„ νƒλ ν•­λ©μ λ‚΄μ©μ΄ μ—¬κΈ°μ— ν‘μ‹λ©λ‹λ‹¤"></textarea>
                
                <!-- μ¤ν”„λ λ“μ‹νΈ νΈμ§‘κΈ° -->
                <div id="spreadsheetContainer" style="display: none;"></div>
                
                <!-- PDF/μ΄λ―Έμ§€ λ―Έλ¦¬λ³΄κΈ° -->
                <div class="preview-area" id="previewArea" style="display: none;">
                    <iframe id="pdfPreview" style="width:100%; height:100%; border:none;"></iframe>
                    <img id="imagePreview" style="max-width:100%; height:auto; display:none;" alt="μ΄λ―Έμ§€ λ―Έλ¦¬λ³΄κΈ°" />
                </div>
            </div>

            <div class="welcome-message" id="welcomeMessage">
                <p>μ™Όμ½μ—μ„ νμΌμ΄λ‚ μ •λ¦¬λ³Έμ„ μ„ νƒν•μ‹λ©΄<br>λ‚΄μ©μ„ ν™•μΈν•κ³  νΈμ§‘ν•  μ μμµλ‹λ‹¤</p>
            </div>
        </div>
    </div>
</div>

<!-- κ²€μƒ‰ κ²°κ³Ό λ¨λ‹¬ -->
<div class="search-modal" id="searchModal" style="display: none;">
    <div class="search-modal-overlay" onclick="closeSearchModal()"></div>
    <div class="search-modal-content">
        <div class="search-modal-header">
            <h3>κ²€μƒ‰ κ²°κ³Ό</h3>
            <button class="close-btn" onclick="closeSearchModal()">β•</button>
        </div>
        <div class="search-modal-body" id="searchResultsContainer">
            <!-- κ²€μƒ‰ κ²°κ³Όκ°€ μ—¬κΈ° ν‘μ‹λ¨ -->
        </div>
    </div>
</div>

<!-- νμΌ μ…λ ¥ (μ¨κΉ€) -->
<input type="file" id="fileInput" style="display: none;" accept="*/*" multiple>

<script th:src="@{/js/NotionManager.js}"></script>

<div th:replace="~{fragments/footer :: siteFooter}"></div>
</body>
</html>
