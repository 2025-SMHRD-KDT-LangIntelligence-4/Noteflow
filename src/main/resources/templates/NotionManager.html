<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="_csrf" th:content="${_csrf.token}"/>
    <meta name="_csrf_header" th:content="${_csrf.headerName}"/>
    <title>정리본 및 파일 관리</title>
    <link rel="stylesheet" th:href="@{/css/header.css}" />
    <link rel="stylesheet" th:href="@{/css/footer.css}" />
    <link rel="stylesheet" th:href="@{/css/notionmanager.css}">

    <!-- ✅ Toast UI Editor CDN 추가 -->
    <link rel="stylesheet" href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />
    <script src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>

    <!-- ✅ SheetJS CDN 추가 (Excel 파일용) -->
    <script src="https://cdn.sheetjs.com/xlsx-0.20.1/package/dist/xlsx.full.min.js"></script>
</head>
<body>
<div th:replace="~{fragments/header :: header}"></div>

<div class="page-wrapper">
    <div class="location-container">
        <!-- 왼쪽: 리스트 -->
        <div class="notion-list-container">
            <div class="tab-container">
                <button class="tab-button active" data-tab="notes">📝 정리본</button>
                <button class="tab-button" data-tab="files">📁 원본파일</button>
            </div>

            <div class="search-container">
                <input type="text" id="searchInput" placeholder="🔍 검색어 입력..." />
                <button id="clearSearchBtn" class="clear-search-btn" style="display: none;">✕</button>
            </div>

            <div class="management-buttons">
                <button id="selectAllBtn">🔲 전체선택</button>
                <button id="createFolderBtn">📁 폴더</button>
                <button id="uploadBtn">📤 업로드</button>
                <button id="bulkDeleteBtn" style="background-color: #dc3545; color: white; display: none;">🗑️ 선택 삭제</button>

            </div>

            <div id="rootDropZone" class="root-drop-zone">
                여기에 드롭하면 <strong>루트</strong>로 이동
            </div>

            <div id="itemList" class="notion-list">로딩 중...</div>
        </div>

        <!-- 오른쪽: 컨텐츠 -->
        <div class="notion-content-container">
            <div id="itemTitle" class="notion-title">
                파일이나 노트를 선택해주세요
            </div>

            <div id="buttonContainer" class="button-container"></div>

            <div class="content-area">
                <div id="welcomeMessage" class="welcome-message">
                    <h2>환영합니다!</h2>
                    <p>왼쪽에서 파일이나 정리본을 선택하시면<br>내용을 확인하고 편집할 수 있습니다</p>
                </div>
                <div id="categorySelectArea" style="display: none; margin: 10px 0; gap:10px;">
                    <label>📂 카테고리</label>
                    <select id="largeCategorySelect">
                        <option value="">대분류 선택</option>
                    </select>
                    <select id="mediumCategorySelect" disabled>
                        <option value="">중분류 선택</option>
                    </select>
                    <select id="smallCategorySelect" disabled>
                        <option value="">소분류 선택</option>
                    </select>
                    <button id="addCategoryBtn">➕ 새 카테고리 추가</button>
                </div>
                <!-- 태그 입력 영역 추가 -->
                <div id="tagInputArea" style="display: none; margin-top: 15px; gap:10px;">
                    <label style="width:100px;">🏷️ 태그</label>
                    <div class="tag-input-wrapper">
                        <div id="tagDisplay" class="tag-display"></div>
                        <input type="text" id="tagInput" placeholder="Enter 키로 태그 추가 | 클릭으로 제거">
                    </div>
                </div>

                <!-- ✅ 텍스트 편집기 (기본) -->
                <textarea id="itemContent" class="notion-content" style="display: none;"></textarea>

                <!-- ✅ Toast UI Editor 영역 -->
                <div id="editorArea" style="display: none; height:490px"></div>

                <!-- ✅ 미리보기 영역 (PDF, 이미지) -->
                <div id="previewArea" style="display: none;">
                    <iframe id="pdfPreview" style="display: none; width: 100%; height: 100%; border: none;"></iframe>
                    <img id="imagePreview" style="display: none; width: 100%; height: 100%; object-fit: contain;" alt="미리보기">
                </div>

                <!-- ✅ 스프레드시트 영역 (Excel, CSV) -->
                <div id="spreadsheetArea" style="display: none;"></div>
            </div>
        </div>
    </div>
</div>


<input type="file" id="fileInput" style="display: none;">

<div th:replace="~{fragments/footer :: footer}"></div>



<script th:src="@{/js/NotionManager.js}"></script>
</body>
</html>
