<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" th:href="@{/css/header.css}" />
<link rel="stylesheet" th:href="@{/css/notionCreate.css}"/>
<link rel="stylesheet" th:href="@{/css/ckEditor.css}"/>
<link rel="stylesheet" href="https://cdn.ckeditor.com/ckeditor5/47.0.0/ckeditor5.css" crossorigin>
<link rel="stylesheet" th:href="@{/css/footer.css}" />

</head>
<body>
<div th:replace="fragments/header :: siteHeader"></div>	

<div class="full-container">
  <div class="slide-location-container">
  	<div class="slide-container">
		      <button class="arrow left">‹</button>
		  <div class="slider-wrapper">
			  <div class="button-container" id="buttonContainer"></div>
		  </div>
		      <button class="arrow right">›</button>
  	</div>
  </div>

  <div class="text-container">
    <div class="input-location-container">
      <form class="input-container">
        <input class="title" placeholder="제목을 입력하세요"/>
        <textarea class="notion-text" placeholder="작성공간입니다."></textarea>
        <button class="submit-button">작성</button>
      </form>
    </div>

    <div class="result-location-container">
      <div class="result-container">
        <div class="result-title">결과물 제목</div>
			<div class="main-container">
				<div class="editor-container editor-container_classic-editor" id="editor-container">
					<div class="editor-container__editor"><div id="editor"></div></div>
				</div>
			</div>
        
        <button class="save-button">저장</button>
      </div>
    </div>
  </div>
</div>
<script src="https://cdn.ckeditor.com/ckeditor5/47.0.0/ckeditor5.umd.js" crossorigin></script>
<script src="https://cdn.ckeditor.com/ckeditor5/47.0.0/translations/ko.umd.js" crossorigin></script>
<script th:src="@{/js/ckEditor.js}"></script>
<script th:inline="javascript">
	document.addEventListener("DOMContentLoaded", () => {
	  const versionData = [
		 /*<![CDATA[*/
		    { kor: "심플버전", eng: "Simple Version", img: [[@{/images/Group.svg}]] },
		    { kor: "문제중심버전", eng: "Problem-Centered Version", img: [[@{/images/Group.svg}]] },
		    { kor: "학습 전부 기록버전", eng: "Full Learning Log Version", img: [[@{/images/Group.svg}]] },
		    { kor: "스토리텔링버전", eng: "Storytelling Version", img: [[@{/images/Group.svg}]] },
		    { kor: "액션아이템버전", eng: "Action Item Version", img: [[@{/images/Group.svg}]] },
		    { kor: "키워드버전", eng: "Keyword Version", img: [[@{/images/Group.svg}]] },
		    { kor: "인사이트중심버전", eng: "Insight-Focused Version", img: [[@{/images/Group.svg}]] },
		    { kor: "코드로그버전", eng: "Code Log Version", img: [[@{/images/Group.svg}]] },
		    { kor: "비주얼요약버전", eng: "Visual Summary Version", img: [[@{/images/Group.svg}]] },
		    { kor: "감정일기버전", eng: "Emotional Diary Version", img: [[@{/images/Group.svg}]] },
		    { kor: "짧은 Q&A버전", eng: "Short Q&A Version", img: [[@{/images/Group.svg}]] },
		    { kor: "성과지향버전", eng: "Performance-Oriented Version", img: [[@{/images/Group.svg}]] },
		    { kor: "멘토링버전", eng: "Mentoring Version", img: [[@{/images/Group.svg}]] },
		    { kor: "리서치논문버전", eng: "Research Paper Version", img: [[@{/images/Group.svg}]] },
		    { kor: "미래투영버전", eng: "Future Projection Version", img: [[@{/images/Group.svg}]] },
		    { kor: "포트폴리오버전", eng: "Portfolio Version", img: [[@{/images/Group.svg}]] }
	    /*]]>*/
	  ];
	
	  const container = document.getElementById("buttonContainer");
	
	  // 슬라이드 버튼 생성
	  versionData.forEach(v => {
	    const btn = document.createElement("div");
	    btn.className = "slide-btn";
	    btn.innerHTML = `
	      <img src="${v.img}" alt="${v.kor}">
	      <div class="eng">${v.eng}</div>
	      <div class="kor">${v.kor}</div>
	    `;
	    container.appendChild(btn);
	  });
	
	  // 버튼 복제하여 무한루프 구현
	  const originalButtons = Array.from(container.children);
	  for (let i = 0; i < 3; i++) {
	    originalButtons.forEach(btn => container.appendChild(btn.cloneNode(true)));
	  }
	
	  const slider = document.querySelector(".slide-container");
	  const track = document.querySelector(".slider-wrapper");
	  const leftBtn = document.querySelector(".arrow.left");
	  const rightBtn = document.querySelector(".arrow.right");
	
	  // 자동 슬라이드 변수
	  let scrollSpeed = 0.8;
	  let isPaused = false;
	  const originalSetWidth = originalButtons.reduce((acc, btn) => acc + btn.offsetWidth + 20, 0);
	
	  // 자동 슬라이드 함수
	  function animate() {
	    if (!isPaused) {
	      track.scrollLeft += scrollSpeed;
	      if (track.scrollLeft >= originalSetWidth) {
	        track.scrollLeft = 0;
	      }
	    }
	    requestAnimationFrame(animate);
	  }
	
	  // 마우스 오버 시 일시정지
	  slider.addEventListener("mouseenter", () => isPaused = true);
	  slider.addEventListener("mouseleave", () => isPaused = false);
	
	  // 좌우 버튼 클릭 이동
	  leftBtn.addEventListener("click", () => {
	    track.scrollBy({ left: -300, behavior: "smooth" });
	  });
	  rightBtn.addEventListener("click", () => {
	    track.scrollBy({ left: 300, behavior: "smooth" });
	  });
	
	  // 드래그 스크롤
	  let isDown = false;
	  let startX;
	  let scrollLeft;
	
	  track.addEventListener("mousedown", e => {
	    isDown = true;
	    track.classList.add("active");
	    startX = e.pageX - track.offsetLeft;
	    scrollLeft = track.scrollLeft;
	  });
	
	  track.addEventListener("mouseleave", () => isDown = false);
	  track.addEventListener("mouseup", () => isDown = false);
	  track.addEventListener("mousemove", e => {
	    if (!isDown) return;
	    e.preventDefault();
	    const x = e.pageX - track.offsetLeft;
	    const walk = (x - startX) * 2;
	    track.scrollLeft = scrollLeft - walk;
	  });
	
	  // 휠 스크롤 (세로 → 가로 변환)
	  track.addEventListener("wheel", (e) => {
	    e.preventDefault();
	    track.scrollBy({ left: e.deltaY, behavior: "smooth" });
	  });
	
	  animate();
	});
</script>
	<div th:replace="fragments/footer :: siteFooter"></div>
</body>
</html>
