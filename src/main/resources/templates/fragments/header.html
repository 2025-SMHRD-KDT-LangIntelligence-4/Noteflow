<!-- src/main/resources/templates/fragments/header.html -->
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      lang="UTF-8">
<head>
    <!-- 외부 CSS 파일 연결 -->
    <link rel="stylesheet" th:href="@{/css/header.css}" />
</head>
<body>
<header th:fragment="siteHeader">
    <div class="header-top">
        <a th:href="@{/main}" class="logo">SAEGIM</a>
    </div>
    <div class="header-bottom">
        <!-- 페이지별로 동적으로 바뀌는 타이틀 -->
        <div class="title-container" th:text="${pageTitle}">홈 대시보드</div>

        <!-- 카테고리 메뉴 -->
        <div class="categori-container">
            <a th:href="@{/main}" th:classappend="${activeMenu == 'main'} ? ' active' : ''">피드</a>
            <a th:href="@{/schedule}" th:classappend="${activeMenu == 'schedule'} ? ' active' : ''">일정관리</a>
            <a th:href="@{/notion/create}" th:classappend="${activeMenu == 'notionCreate'} ? ' active' : ''">노션작성</a>
            <a th:href="@{/notion/manage}" th:classappend="${activeMenu == 'notionManage'} ? ' active' : ''">노션관리</a>
            <a th:href="@{/quiz/create}" th:classappend="${activeMenu == 'quizCreate'} ? ' active' : ''">문제생성</a>
        </div>

        <!-- 로그인 상태에 따른 버튼 -->
        <div class="login-container">
            <div sec:authorize="isAnonymous()">
                <a th:href="@{/login}" class="login-button">로그인</a>
            </div>
            <div sec:authorize="isAuthenticated()">
                <a th:href="@{/mypage}" class="login-button">마이페이지</a>
                <a th:href="@{/logout}" class="login-button">로그아웃</a>
            </div>
        </div>
    </div>

    <div class="AI-position-container">
        <div class="AI-container">AI모델 이미지 공간입니다</div>
    </div>

    <div class="top-button-position-container">
        <button class ="top-button">TOP</button>
    </div>
    
 <script>
	const topButtonContainer = document.querySelector('.top-button-position-container');
	const topButton = document.querySelector('.top-button');
	
	// 스크롤 감지: 300px 이상 내려가면 버튼 보이기
	window.addEventListener('scroll', () => {
	    if (window.scrollY > 300) {
	        topButtonContainer.style.display = 'block';
	    } else {
	        topButtonContainer.style.display = 'none';
	    }
	});
	
	// 클릭 시 부드럽게 맨 위로 이동
	topButton.addEventListener('click', () => {
	    window.scrollTo({
	        top: 0,
	        behavior: 'smooth'
	    });
	});  
 </script>
</header>
</body>
</html>
