<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8"/>
  <title th:text="${pageTitle} ?: 'ë…¸ì…˜ ì‘ì„±'">ë…¸ì…˜ ì‘ì„±</title>
<link rel="stylesheet" th:href="@{/css/header.css}" />
<link rel="stylesheet" id="theme-css"th:href="@{/css/NotionCreateUnified.css}" />
<link rel="stylesheet" th:href="@{/css/footer.css}" />
<script>
		document.addEventListener("DOMContentLoaded", () => {
		  const themeLink = document.getElementById("theme-css");
		  const themeToggleBtn = document.getElementById("theme-toggle-btn");
		
		  // ì €ì¥ëœ ëª¨ë“œ ë¶ˆëŸ¬ì˜¤ê¸°
		  const savedTheme = localStorage.getItem("theme") || "light";
		
		  // ë¡œê·¸ì¸ ì—¬ë¶€ í™•ì¸ (ë²„íŠ¼ì´ ì—†ìœ¼ë©´ ë¡œê·¸ì•„ì›ƒ ìƒíƒœë¡œ íŒë‹¨)
		  const isLoggedIn = !!themeToggleBtn;
		
		  if (isLoggedIn) {
		    // ë¡œê·¸ì¸ ìƒíƒœì—ì„œëŠ” ì €ì¥ëœ í…Œë§ˆ ì ìš©
		    applyTheme(savedTheme);
		
		    // ë²„íŠ¼ í´ë¦­ ì‹œ ë‹¤í¬ëª¨ë“œ ì „í™˜
		    themeToggleBtn.addEventListener("click", () => {
		      const current = localStorage.getItem("theme") || "light";
		      const next = current === "light" ? "dark" : "light";
		      applyTheme(next);
		    });
		  } else {
		    // ë¡œê·¸ì•„ì›ƒ ìƒíƒœì—ì„œëŠ” í•­ìƒ ë¼ì´íŠ¸ëª¨ë“œ ì ìš©
		    applyTheme("light");
		  }
		
		  // âœ… í…Œë§ˆ ì ìš© í•¨ìˆ˜
		  function applyTheme(mode) {
		    if (mode === "dark") {
		      themeLink.setAttribute("href", "/CSSDARK/NotionCreateUnified.css");
		      localStorage.setItem("theme", "dark");
		      if (themeToggleBtn) {
		        themeToggleBtn.classList.add("dark"); // ë²„íŠ¼ ì´ë™ í´ë˜ìŠ¤ ì¶”ê°€
		      }
		    } else {
		      themeLink.setAttribute("href", "/css/NotionCreateUnified.css");
		      localStorage.setItem("theme", "light");
		      if (themeToggleBtn) {
		        themeToggleBtn.classList.remove("dark"); // ê¸°ë³¸ ìœ„ì¹˜ë¡œ ë³µê·€
		      }
		    }
		  }
		});
	</script> 

  <!-- CSRF -->
  <meta name="_csrf" th:content="${_csrf.token}"/>
  <meta name="_csrf_header" th:content="${_csrf.headerName}"/>

  <!-- Toast UI Editor / Viewer -->

<link rel="stylesheet"
	href="https://uicdn.toast.com/editor/latest/toastui-editor.min.css" />

<script
	src="https://uicdn.toast.com/editor/latest/toastui-editor-all.min.js"></script>

</head>
<body>
  <!-- âœ… í—¤ë” í”„ë˜ê·¸ë¨¼íŠ¸ í¬í•¨ (ì‹¤ì œ fragment ì´ë¦„ì— ë§ê²Œ ì¡°ì •) -->
  <div th:replace="fragments/header :: siteHeader"></div>

  <div class="nc-container">
    <!-- ğŸ”„ [ì„ íƒ ë‹¨ê³„] í”„ë¡¬í”„íŠ¸ ìŠ¬ë¼ì´ë“œ + ì˜ˆì‹œ Viewer -->
    <section id="nc-promptStage">
      <div class="nc-slider-wrapper" style="margin-bottom:12px;">
        <div class="nc-slide-container">
          <div id="nc-buttonContainer"></div>
          <button class="nc-arrow nc-left" aria-label="ì´ì „">â€¹</button>
          <button class="nc-arrow nc-right" aria-label="ë‹¤ìŒ">â€º</button>
        </div>
      </div>
	  <div class="version-btn-container">
	  	<button class="simpleBtn">ì‹¬í”Œ</button>
	  	<button class="normalBtn">í‘œì¤€</button>
	  	<button class="advanceBtn">ê³ ê¸‰</button>
	  </div>
      <div class="nc-prompt-example-viewer">
        <div class="nc-viewer-header">
          <label class="nc-viewer-title">í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ</label>
          <span class="nc-badge nc-badge-readonly">ì˜ˆì‹œëŠ” í¸ì§‘ ë¶ˆê°€</span>
        </div>
        <div id="nc-promptExampleViewer" class="nc-viewer-surface" aria-label="í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ ì½ê¸° ì „ìš©"></div>
        <p class="nc-desc">
          <b>í˜„ì¬:</b> í”„ë¡¬í”„íŠ¸ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤. ì¹´ë“œì˜ ì²´í¬ë°•ìŠ¤ë¥¼ ì¼œë©´ ì„ íƒ í”„ë¡¬í”„íŠ¸ì˜ ì˜ˆì‹œë§Œ í‘œì‹œë˜ê³  ìŠ¬ë¼ì´ë“œê°€ ë©ˆì¶¥ë‹ˆë‹¤.
        </p>
      </div>
    </section>

    <!-- âœï¸ [ì…ë ¥ ë‹¨ê³„] í”„ë¡¬í”„íŠ¸ í™•ì • í›„ â€” ìŠ¬ë¼ì´ë“œ/Viewer ìˆ¨ê¹€, ìƒë‹¨ì— â€˜ëŒì•„ê°€ê¸°â€™ -->
    <section id="nc-inputStage" style="display:none;">
	      <div class="nc-stage-header">
	        <div id="nc-selectedPromptName" class="nc-selected-name">ì„ íƒí•œ í”„ë¡¬í”„íŠ¸: (ì—†ìŒ)</div>
	        <button id="nc-btnBack" class="nc-btn nc-btn-back">â† í”„ë¡¬í”„íŠ¸ ì„ íƒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
	      </div>

	      <!-- ì œëª© -->
	      <div style="margin-bottom:8px; width:90%; display:flex; justify-content:space-between; align-items:center;">
	        <label for="nc-ResultTitle" style="width: 40px;">ì œëª©</label>
	        <input id="nc-ResultTitle" type="text" class="title" placeholder="ì œëª©ì„ ì…ë ¥í•˜ì„¸ìš”"/>
	      </div>

	      <!-- ì‘ì„±ìš© Toast Editor -->
	      <div class="nc-text-input">
	        <label>ì…ë ¥/í¸ì§‘</label>
	        <div id="nc-editor"></div>
	        <div class="nc-counters">
	          <span>ê¸€ììˆ˜: <b id="nc-charCount">0</b></span>
	          <span>í† í°(ì¶”ì •): <b id="nc-tokenCount">0</b></span>
	          <span id="nc-lengthHint" class="nc-hint"></span>
	        </div>
	      </div>

	      <!-- íŒŒì¼ ì—…ë¡œë“œ -->
		<div class="nc-file-section">
			<label>ë˜ëŠ” íŒŒì¼ ì—…ë¡œë“œ</label>
			<input type="file" id="nc-fileInput" style="display:none;">
			<button id="nc-file-upload" class="nc-btn nc-secondary">ğŸ“ íŒŒì¼ ì„ íƒ ë° ì—…ë¡œë“œ</button>
			<p id="nc-preMsg"></p>
		</div>

	      <!-- ì•¡ì…˜ -->
	      <div class="nc-actions">
	        <label>ìš”ì•½í•˜ê¸° ë¯¸ì‹¤í–‰í›„ ì €ì¥ì‹œ ì…ë ¥ë‚´ìš©ë§Œ ì €ì¥ë©ë‹ˆë‹¤.</label>
	        <div class="nc-btn-container">
		        <button id="nc-temsetBtn" class="nc-btn nc-primary" disabled>ìš”ì•½í•˜ê¸°</button>
		        <button id="nc-saveBtn" class="nc-btn nc-secondary" disabled>ì €ì¥í•˜ê¸°</button>
	        </div>
	      </div>

	      <!-- ê²°ê³¼ -->
	      <label class="subs-title">ìš”ì•½ê²°ê³¼</label>
	      <div id="nc-resultBox" class="nc-result-box"></div>
    </section>

    <!-- ë¡œë”© ì˜¤ë²„ë ˆì´ -->
    <div id="nc-loadingOverlay">
    	
    	ìš”ì•½ ì¤‘...
    </div>
  </div>

  <!-- âœ… í‘¸í„° í”„ë˜ê·¸ë¨¼íŠ¸ í¬í•¨ (ì‹¤ì œ fragment ì´ë¦„ì— ë§ê²Œ ì¡°ì •) -->
  <div th:replace="fragments/footer :: siteFooter"></div>

  <!-- ì„œë²„ í”„ë¡¬í”„íŠ¸ ëª©ë¡ -->
	<script th:inline="javascript">
		window.prompts = /*[[${prompts}]]*/[];
	</script>
	<script th:src="@{/js/NotionCreateUnified.js}"></script>
</body>
</html>